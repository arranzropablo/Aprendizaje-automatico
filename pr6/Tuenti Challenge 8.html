<!DOCTYPE html>
<!-- saved from url=(0034)https://contest.tuenti.net/Contest -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no">

    <link rel="icon" href="https://contest.tuenti.net/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href="./Tuenti Challenge 8_files/normalize.css">
    <link rel="stylesheet" href="./Tuenti Challenge 8_files/contest.css">

    <script type="text/javascript" async="" src="https://ssl.google-analytics.com/ga.js"></script><script type="text/javascript" src="./Tuenti Challenge 8_files/widgets.js"></script>
    <script type="text/javascript" src="./Tuenti Challenge 8_files/jquery-2.1.3.min.js"></script>
    <script type="text/javascript" src="./Tuenti Challenge 8_files/lodash.min.js"></script>
    <script type="text/javascript" src="./Tuenti Challenge 8_files/countdown.js"></script>

    <title>Tuenti Challenge 8</title>
<style></style></head>

<body>
<header>
    <div class="grid">
        <h1 class="logo h-left"><a href="https://contest.tuenti.net/">Tuenti Challenge 8</a></h1>
        <nav class="h-right desktop-nav">
            <ul>
                <li class="none"><a href="https://contest.tuenti.net/">Home</a></li>
                <li class="none"><a href="https://contest.tuenti.net/Info/about">Info</a></li>
                <li class="active"><a href="https://contest.tuenti.net/Challenges">Challenges</a></li>
                <li class="none"><a href="https://contest.tuenti.net/Info/past">Past editions</a></li>
                                <li class="none"><a href="https://contest.tuenti.net/Stats">Ranking</a></li>
                                                    <li class="form">
                        <form name="logout" action="https://contest.tuenti.net/Login/logout" method="post"><input type="hidden" name="csrf" value="e4f75bad423d14f498f94be3f86882e1">                            <button type="submit" tabindex="4" class="">
                                <span>Logout</span>
                            </button>
                        </form>
                    </li>
                            </ul>
        </nav>
    </div>
    <nav class="mobile-nav">
        <ul>
            <li class="none"><a href="https://contest.tuenti.net/">Home</a></li>
            <li class="none"><a href="https://contest.tuenti.net/Info/about">Info</a></li>
            <li class="active"><a href="https://contest.tuenti.net/Challenges">Challenges</a></li>
            <li class="none"><a href="https://contest.tuenti.net/Info/past">Past editions</a></li>
                        <li class="none"><a href="https://contest.tuenti.net/Stats">Ranking</a></li>
                                        <li class="form">
                    <form name="logout" action="https://contest.tuenti.net/Login/logout" method="post"><input type="hidden" name="csrf" value="e4f75bad423d14f498f94be3f86882e1">                        <button type="submit" tabindex="4" class="">
                            <span>Logout</span>
                        </button>
                    </form>
                </li>
                    </ul>
    </nav>
</header>
<div class="content">
<div class="grid">
<div class="problem">

<div class="problem-section">
	<h2><strong>Challenge 4</strong> - Brave Knight</h2>
	<style>
    sup {
        vertical-align: super;
        font-size: smaller;
    }
</style>

<p>The princess is lost in a dangerous place. The only mission the brave knight has been preparing himself for all his life is to safe her.</p><p>

</p><p>The terrain is represented by a grid of squares. The material of each square can be ground, trampoline or lava. Only lava squares (represented by the character '<b>#</b>') are considered invalid, the rest are valid squares.</p>

<p>The brave knight moves through the map in 'L'-shaped jumps like a chess knight. It can move to a square that is two squares away horizontally and one square vertically, or two squares vertically and one square horizontally. He can jump over any square but he cannot land in an invalid square or outside the terrain.</p>

<p>From ground squares (represented by the character '<b>.</b>') the knight moves as described above. But from trampoline squares (represented by the character '<b>*</b>') the knight does an super powered double jump that is four squares horizontally and two squares vertically, or four squares vertically and two squares horizontally.</p>

<p>The knight located on square <b>S</b> must rescue the princess located on square <b>P</b> and take her to the safe destination square <b>D</b> (<b>S</b>, <b>P</b> and <b>D</b> are ground squares).</p>

<h3>Input</h3>
<p>The first line has an integer <b>C</b>, which is the number of cases for the problem.<br>
Each case has a line with 2 integers separated by a space, <b>N</b> and <b>M</b>, that represent the dimensions of the map.<br>
<b>N</b> lines follow, each one containing <b>M</b> characters that represent the squares of the map.</p>

<h3>Output</h3>
<p>For each case, there should be a line starting with "Case #x: " followed by the minimum number of jumps the knight has to make to rescue the princess and take her to the safe place. If there is no way, the output should be IMPOSSIBLE.</p>

<h3>Limits</h3>
<ul>
<li>1 ≤ <b>C</b> ≤ 100</li>
<li>2 ≤ <b>N</b>, <b>M</b> ≤ 1000</li>
</ul>

<h3>Examples</h3>

<table style="width:100%"><tbody><tr>
<td><pre>Case 1:

4 5
P#.S#
.#...
#.#..
.D..#


</pre></td><td><pre>Case 2:

4 5
.#.D#
.#...
#S#.#
.P..#


</pre></td>
<td><pre>Case 3:

6 6
S#....
##*..D
......
######
......
P.....
</pre></td>
</tr></tbody></table>

<p>In Case 1 the knight could follow this path: [<b>S</b>] (0,3) -&gt; (2,4) -&gt; (1,2) -&gt; [<b>P</b>] (0,0) -&gt; (1,2) -&gt; [<b>D</b>] (3, 1) So the minimum number of jumps is 5.<br>
In Case 2 there is no way to reach D square.<br>
In Case 3 there is a double jump square so the knight will travel this path: [<b>S</b>] (0,0) -&gt; (1,2) -&gt; [<b>P</b>] (5,0) -&gt; (4,2) -&gt; (2,3) -&gt; [<b>D</b>] (1,5) making a total of 5 jumps.</p>

<h3>Sample Input</h3>

<pre>3
4 5
P#.S#
.#...
#.#..
.D..#
4 5
.#.D#
.#...
#S#.#
.P..#
6 6
S#....
##*..D
......
######
......
P.....
</pre>

<h3>Sample Output</h3>

<pre>Case #1: 5
Case #2: IMPOSSIBLE
Case #3: 5
</pre>
</div>

<div class="problem-section">
	<h2>Test &amp; submit your code</h2>
	<p>We provide a form to test and submit your code. You need to pass the test phase before attempting the submit phase.</p>

	<h3>Test your program</h3>
	<div class="group">
		<div id="test-success" class="success hide">
		  You have passed the test phase :-)
		</div>
		<div id="form-test-error" class="error hide"></div>
		<div id="form-test-output" class="hide"><div class="submit-feedback"></div></div>
		<form id="form-test" name="form-test" action="https://contest.tuenti.net/Solver/test" method="post" enctype="multipart/form-data">
			<input type="hidden" name="token" value="hDeCJpfdHEYhOiROR7wS">
			<p><a href="https://contest.tuenti.net/Solver/testInput?token=hDeCJpfdHEYhOiROR7wS" class="icon-download">Download test input</a></p>
			<p>Program output:</p>
			<p><input type="file" name="output" id="output"></p>
			<p><button>Submit test output</button></p>
		</form>
	</div>

	<p>A nice output will tell you if your program got the right solution or not. You can try as many times as you need.</p>

	<h3>Submit your program to the challenge</h3>
	<div id="submit-phase" class="hide">
		<div class="group">
		  <div id="form-submit-error" class="error hide"></div>
		  <form id="form-submit">
			<input type="hidden" name="token" value="hDeCJpfdHEYhOiROR7wS">
		  	<p><a href="https://contest.tuenti.net/Solver/submitInput?token=hDeCJpfdHEYhOiROR7wS" class="icon-download">Download input</a></p>
			<p>Program output:</p>
			<p><input type="file" name="output" id="output"></p>
			<p>Source code:</p>
			<p><input type="file" name="source" id="source"></p>
			<p><button>Submit output</button></p>
		  </form>
		</div>
	</div>

	<div id="submit-phase-empty" class="error">
	  You have not solved the test phase yet!
	</div>

	<script>
	$(function () {
		var formatOutput = function (text) {
			return text.trim().split('\n').map(function (line) {
				var klass = '';
				if (line.match(/^Line\s+\d+\s+\[WRONG\]/)) {
					klass = ' class="feedback-line-error"';
				} else if (line.match(/^Line\s+\d+\s+\[OK!\]/)) {
					klass = ' class="feedback-line-ok"';
				}
				return '<div' + klass + '>' + $('<div />').text(line).html() + '</div>';
			}).concat('\n');
		};
		$('#form-test').on('submit', function(e) {
			e.preventDefault();
			var formData = new FormData($('#form-test')[0]);
			var error = function(content) {
				var $error = $('#form-test-error');
				$error.html(content);
				$error.removeClass('hide');
			};
			$.ajax("/Solver/test", {
				type: 'post',
				data: formData,
				processData: false,
				contentType: false,
				dataType: 'json'
			}).done(function(data) {
				$('#form-test-error').addClass('hide');
				if (data.error) {
					if (!data.content && !data.output) {
						location.reload();
					}
					if (data.content) {
						error(data.content);
					}
					if (data.output) {
						$('#form-test-output .submit-feedback').html(formatOutput(data.output));
						$output = $('#form-test-output');
						$output.removeClass('hide');
						$output.removeClass('success');
						$output.addClass('error');
					} else {
						$('#form-test-output').addClass('hide');
					}
				} else {
					if (data.output) {
						$('#form-test-output .submit-feedback').html(formatOutput(data.output));
						$output = $('#form-test-output');
						$output.removeClass('hide');
						$output.removeClass('error');
						$output.addClass('success');
						$('#test-success').removeClass('hide');
						$('#submit-phase').removeClass('hide');
						$('#submit-phase').removeClass('hide');
						$('#submit-phase-empty').addClass('hide');
					} else {
						$('#form-test-output').addClass('hide');
					}
				}
			}).fail(function() {
				error("Error uploading test output. Please try again");
			});
			return false;
		});
		$('#form-submit').on('submit', function(e) {
			e.preventDefault();
			var formData = new FormData($('#form-submit')[0]);
			var error = function(content) {
				var $error = $('#form-submit-error');
				$error.html(content);
				$error.removeClass('hide');
			};
			$.ajax("/Solver/submit", {
				type: 'post',
				data: formData,
				processData: false,
				contentType: false,
				dataType: 'json'
			}).done(function(data) {
				$('#form-test-error').addClass('hide');
				if (data.error) {
					error(data.content);
				} else {
					document.location=document.location;
				}
			}).fail(function() {
				error("Error uploading submit output and source. Please try again");
			});
			return false;
		});
	});
	</script>
	<p>Note that you first need to solve the test phase before submitting the code. During the submit phase, in some problems, we
	might give your program harder questions, so try to make your program failsafe.</p>
	<p><strong>Important:</strong> In this phase, you must provide the source code used to solve the challenge and, if necessary, a brief explanation of how you solved it.</p>
	<p>Remember <b>you can only submit once!</b> Once your solution is submitted you won't be able to amend it to fix issues or make it faster,
	so please be sure your solution is finished before submitting it.</p>
	<p>If you have any doubts, please check the <a href="https://contest.tuenti.net/Info/about">info section</a>.</p>
</div>

<div class="problem-section">
	<h2>Go ahead</h2>
	<h3>I'm done! :)</h3>
	<p>Once you have submitted your code, the page should be automatically refreshed so you can continue to next challenge.</p>
	<h3>I'm stuck! :(</h3>
	<p>Be sure you follow the <a href="http://twitter.com/#!/TuentiEng" target="_blank">Tuenti Engineering</a> twitter for updates and
	possible hints during the contest.</p>
	<p>If this challenge is too hard and you are blocked, you will be able to skip it after two hours. Note that
	<strong>you won't be able to complete it later</strong>, and you have a limited number of challenges to skip.</p>
	<p>Finally, if you run out of skips but are still really stuck with one problem, you will be able to skip it after 24 hours.</p>
	<br>
	<h3>Challenge status:</h3>
	<div id="status">
		<table class="status">
<tbody>
<tr>
	<th>Test case</th>
	<td><span>
		Not done	</span></td>
</tr>
<tr>
	<th>Skip</th>
	<td>You still have to wait 2h, 0m and 0s to be able to skip this challenge</td>
</tr>

</tbody>
</table>
	</div>
	<br>
	<br>
	<script type="text/javascript">
	function refreshStatus() {
		var el = document.getElementById('status');
		el.innerHTML = '<div class="center"><img src="/resources/loading.gif" style="border:0" /></div>';
		var req = new XMLHttpRequest();
		req.open('GET', '/Contest/status?id=4', true);
		req.onreadystatechange	= function() {
			if (this.readyState == XMLHttpRequest.DONE && this.status == 200) {
				el.innerHTML = this.responseText;
			}
		}
		req.send(null);
	}
	</script>
	<div class="center">
		<button type="submit" tabindex="4" class="btn" onclick="refreshStatus()">
			Refresh status
		</button>
	</div>
</div>

</div>
</div>
</div>
<div class="footer-decorations no-mobile">
    <div class="circle" style="width: 245px; height: 245px; top: 15px; left: calc(50% - 122px);"></div>
    <img style="position: absolute; bottom:-8px; left:80px" src="./Tuenti Challenge 8_files/pyramids.svg" width="138px">
</div>
<footer>
    <div class="circle no-mobile" style="width: 22px; height: 22px; top: 15px; left: 208px;"></div>
    <div class="circle no-mobile" style="width: 42px; height: 42px; top: -21px; left: 246px;"></div>
    <div class="circle no-mobile" style="width: 42px; height: 42px; top: -21px; right: 216px;"></div>
    <div class="grid" style="padding: 0 8px 0 16px">
        <div class="row"><p><img src="./Tuenti Challenge 8_files/tuenti-logo.svg" alt="tuenti logo" width="110"></p></div>
        <div class="row no-mobile"><p>&nbsp;</p></div>
        <div class="row">
            <p class="h-left">Tweet about this!</p>
            <p class="h-right">Follow</p>
        </div>
        <div class="row">
            <p class="h-left"><a href="http://twitter.com/intent/tweet?text=%23TuentiChallenge8" target="_blank">#TuentiChallenge8</a></p>
            <p class="h-right">
                <a href="https://twitter.com/Tuentieng" class="twitter-follow-button" data-show-count="false" data-lang="es" data-show-screen-name="false" data-dnt="true" target="_blank">@TuentiEng</a>
            </p>
        </div>
        <div class="row no-mobile"><p>&nbsp;</p></div>
        <div class="row">
            <p class="h-left">© Tuenti 2018</p>
        </div>
    </div>
</footer>

<script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-40515046-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script>



<object id="__symantecPKIClientMessenger" data-supports-flavor-configuration="true" data-extension-version="0.5.0.109" style="display: none;"></object><span id="__symantecPKIClientDetector" style="display: none;">__PRESENT</span></body></html>